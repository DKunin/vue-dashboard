<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Dashboard">
    <meta name="author" content="Dmitri Kunin">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://npmcdn.com/tachyons@4.6.1/css/tachyons.min.css">
    <link rel="stylesheet" href="./styles/styles.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.0/vue.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/2.5.3/vue-router.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue-resource/1.3.1/vue-resource.min.js"></script>
    <script type="text/javascript" src="./scripts/directives/visibilityUpdate.js"></script>

    <script type="text/javascript" src="./scripts/focusIcon.js"></script>
    <script type="text/javascript" src="./scripts/dashCard.js"></script>
    <script type="text/javascript" src="./scripts/favIcon.js"></script>
    <script type="text/javascript" src="./scripts/tasksList.js"></script>
    <script type="text/javascript" src="./scripts/rescueTime.js"></script>
    <script type="text/javascript" src="./scripts/tasksListReport.js"></script>
    <script type="text/javascript" src="./scripts/stashList.js"></script>
    <script type="text/javascript" src="./scripts/planList.js"></script>
    <script type="text/javascript" src="./scripts/dashboard.js"></script>
    <script type="text/javascript" src="./scripts/settings.js"></script>
    <script type="text/javascript" src="./scripts/mainApp.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/javascript">

        function selectText(element) {
            var text = document.querySelector(element);
            var selection = document.getSelection();
            var range = document.createRange();
            range.selectNode(text);
            selection.removeAllRanges();
            selection.addRange(range);
            document.execCommand('copy');
            selection.removeAllRanges();
        }
        let updateSettings;

        document.addEventListener('DOMContentLoaded', function initiateApplication() {
            Object.defineProperty(Vue.prototype, '$localIp', { value: 'http://10.10.12.143' });
            Object.defineProperty(Vue.prototype, '$localDockerIp', { value: 'http://192.168.99.100' });

            Vue.directive('visibilityUpdate', visibilityUpdate);

            Vue.component('focusIcon', focusIcon);
            Vue.component('dashCard', dashCard);
            Vue.component('tasksListReport', tasksListReport);
            Vue.component('tasksList', tasksList);
            Vue.component('stashList', stashList);
            Vue.component('planList', planList);
            Vue.component('rescueTime', rescueTime);
            Vue.component('dashboard', dashboard);
            Vue.component('favIcon', favIcon);

            const options = JSON.parse(
                localStorage.getItem('settings') || '{}'
            );

            const app = new Vue(mainApp);

            updateSettings = function ({ stashUserName, resqueApi, newsApi }) {
                Vue.set(app, 'stashUserName', stashUserName);
                Vue.set(app, 'resqueApi', resqueApi);
                Vue.set(app, 'newsApi', newsApi);
            };
            updateSettings(options);
        });
    </script>
  </body>
</html>
